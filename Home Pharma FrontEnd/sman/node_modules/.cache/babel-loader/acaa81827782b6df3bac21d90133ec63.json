{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\subai\\\\OneDrive\\\\Desktop\\\\fyp-19\\\\sman\\\\sman\\\\src\\\\pages\\\\Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport Layout from \"./Layout\";\nimport styles from \"./Login.module.css\";\nimport axios from \"axios\";\nimport AuthContext from \"../context/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  username: \"\",\n  password: \"\"\n};\nexport default function Login() {\n  _s();\n\n  const [data, setData] = useState({ ...initialState\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const auth = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(false);\n\n    try {\n      const res = await axios.post(\"/auth/login\", data);\n      auth.login(res.data.token);\n      navigate(\"/admin/dashboard\");\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n\n      const msg = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error;\n      const errors = (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.errors;\n\n      if (errors) {\n        const msgs = errors.map(error => error.msg + \" of \" + error.param);\n        setError(msgs);\n      } else if (msg) setError([msg]);else setError([\"Internal server error\"]);\n\n      console.log(err);\n    }\n\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.section,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.container,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Enter Admin's Credientials\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: styles.form,\n          onSubmit: onSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Username\",\n            value: data.username,\n            onChange: e => setData({ ...data,\n              username: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            value: data.password,\n            onChange: e => setData({ ...data,\n              password: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            disabled: loading,\n            children: loading ? \"Loggin In\" : \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), error && error.map((err, i) => /*#__PURE__*/_jsxDEV(\"small\", {\n            children: err\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 45\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"t9lDwgZJ5PiwW9/VkZ+xbrBgcWQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useContext","Layout","styles","axios","AuthContext","useNavigate","initialState","username","password","Login","data","setData","loading","setLoading","error","setError","auth","navigate","onSubmit","e","preventDefault","res","post","login","token","err","msg","response","errors","msgs","map","param","console","log","section","container","form","target","value","i"],"sources":["C:/Users/subai/OneDrive/Desktop/fyp-19/sman/sman/src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport Layout from \"./Layout\";\nimport styles from \"./Login.module.css\";\nimport axios from \"axios\";\nimport AuthContext from \"../context/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst initialState = { username: \"\", password: \"\" };\n\nexport default function Login() {\n  const [data, setData] = useState({ ...initialState });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const auth = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(false);\n\n    try {\n      const res = await axios.post(\"/auth/login\", data);\n      auth.login(res.data.token);\n      navigate(\"/admin/dashboard\");\n    } catch (err) {\n      const msg = err.response?.data?.error;\n      const errors = err.response?.data?.errors;\n      if (errors) {\n        const msgs = errors.map((error) => error.msg + \" of \" + error.param);\n        setError(msgs);\n      } else if (msg) setError([msg]);\n      else setError([\"Internal server error\"]);\n      console.log(err);\n    }\n\n    setLoading(false);\n  };\n\n  return (\n    <Layout>\n      <section className={styles.section}>\n        <div className={styles.container}>\n          <h1>Enter Admin's Credientials</h1>\n          <form className={styles.form} onSubmit={onSubmit}>\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              value={data.username}\n              onChange={(e) => setData({ ...data, username: e.target.value })}\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              value={data.password}\n              onChange={(e) => setData({ ...data, password: e.target.value })}\n            />\n            <button className=\"button\" disabled={loading}>\n              {loading ? \"Loggin In\" : \"Log In\"}\n            </button>\n            {error && error.map((err, i) => <small key={i}>{err}</small>)}\n          </form>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}